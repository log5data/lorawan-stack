extends:
  - ttn
  - plugin:jest/recommended
  - prettier
  - prettier/react

parser: babel-eslint

plugins:
  - jsdoc
  - prettier
  - import

env:
  node: true
  jest: true

globals:
  shallow: true
  render: true
  mount: true
  snapshotDiff: true

parserOptions:
  ecmaFeatures:
    # Remove after migration
    legacyDecorators: true

rules:
  prettier/prettier: error

  # Enforce import order
  import/order:
    - error
    - pathGroups:
      - pattern: "{.,..,../..,../../..,../../../..}/**/messages"
        group: parent
      - pattern: "{.,..,../..,../../..,../../../..}/constants/**"
        group: parent
        position: before
      - pattern: "{..,../..,../../..,../../../..}/api"
        group: parent
        position: before
      - pattern: "{.,..,../..,../../..,../../../..}/components/**"
        group: parent
        position: before
      - pattern: "{.,..,../..,../../..,../../../..}/containers/**"
        group: parent
        position: before
      - pattern: "{.,..,../..,../../..,../../../..}/views/**"
        group: parent
        position: before
      - pattern: "{.,..,../..,../../..,../../../..}/lib/components/**"
        group: parent
        position: before
      - pattern: "{.,..,../..,../../..,../../../..}/lib/**"
        group: parent
        position: before
      - pattern: "{.,..,../..,../../..,../../../..}/store/**"
        group: parent
        position: before
      - pattern: "{.,..,../..,../../..,../../../..}/(assets|styles)/**"
        group: index
        position: before
      - pattern: "../*"
        group: parent
      newlines-between: always

  # Prevent superfluous path traversions in import statements
  import/no-useless-path-segments:
    - error
    - noUselessIndex: true

  # Warn when an exported module is unused
  import/no-unused-modules: warn

  # Enforce newlines after import statements
  import/newline-after-import: error

  jest/no-large-snapshots:
    - warn
    - maxSize: 400

  # Change to `error` after https://github.com/TheThingsNetwork/lorawan-stack/issues/1086
  # is resolved.

  # Prevent extraneous defaultProps on components
  react/default-props-match-prop-types: warn
  # Enforce a defaultProps definition for every prop that is not a required prop
  react/require-default-props: warn
  # Prevent definitions of unused prop types
  react/no-unused-prop-types: warn
  # Prevent missing props validation in a React component definition
  react/prop-types: warn
  # Enforce propTypes declarations alphabetical sorting
  react/sort-prop-types: warn
  # Prevent undefined components
  react/jsx-no-undef: warn
  # Prevent vague prop types
  react/forbid-prop-types:
    - warn
    - forbid:
        - any
        - array
        - object
      checkContextTypes: true
      checkChildContextTypes: true

  jsdoc/no-undefined-types: error
  jsdoc/check-param-names: error
  jsdoc/check-types: error
  jsdoc/require-param-name: error
  jsdoc/require-param-type: error
  jsdoc/require-hyphen-before-param-description: error

  # Warn on console occurrences
  no-console:
    - warn

  # Warn on missing JsDoc definitions
  valid-jsdoc:
    - warn
    - prefer:
        return: returns
        arg: param
        argument: param
        class: constructor
        virtual: abstract
      requireReturn: false
